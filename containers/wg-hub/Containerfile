FROM ghcr.io/ublue-os/ucore-minimal:stable@sha256:c401b2a00a8f7fa7861c7484c475192b0a492f1c4de01dda3ac9c4f4bbf274cd

ARG FILES_ROOT=./containers/wg-hub/files

RUN dnf install -y \
  nebula \
  node-exporter \
  wireguard-tools \
  && dnf clean all

COPY ${FILES_ROOT}/modules.conf /etc/modules-load.d/99-wg.conf
COPY ${FILES_ROOT}/sysctl.conf /etc/sysctl.d/99-wg.conf

RUN bootc container lint
